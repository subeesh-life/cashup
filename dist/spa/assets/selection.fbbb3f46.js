import{Q as B}from"./scroll.c639aa9d.js";import{c as Q,d as R}from"./render.c6b73402.js";import{i as M,B as q,r as T,c as m,w as v,k as z,h as w,E as S,g as x,o as U,C as k,V as A,W as O}from"./index.73003918.js";import{v as P,c as $}from"./QBtn.7f80d1c4.js";var I=Q({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(t,{slots:f,emit:r}){const{proxy:{$q:c}}=x(),a=M(S,q);if(a===q)return console.error("QHeader needs to be child of QLayout"),q;const h=T(parseInt(t.heightHint,10)),n=T(!0),u=m(()=>t.reveal===!0||a.view.value.indexOf("H")!==-1||c.platform.is.ios&&a.isContainer.value===!0),i=m(()=>{if(t.modelValue!==!0)return 0;if(u.value===!0)return n.value===!0?h.value:0;const e=h.value-a.scroll.value.position;return e>0?e:0}),p=m(()=>t.modelValue!==!0||u.value===!0&&n.value!==!0),s=m(()=>t.modelValue===!0&&p.value===!0&&t.reveal===!0),H=m(()=>"q-header q-layout__section--marginal "+(u.value===!0?"fixed":"absolute")+"-top"+(t.bordered===!0?" q-header--bordered":"")+(p.value===!0?" q-header--hidden":"")+(t.modelValue!==!0?" q-layout--prevent-focus":"")),V=m(()=>{const e=a.rows.value.top,o={};return e[0]==="l"&&a.left.space===!0&&(o[c.lang.rtl===!0?"right":"left"]=`${a.left.size}px`),e[2]==="r"&&a.right.space===!0&&(o[c.lang.rtl===!0?"left":"right"]=`${a.right.size}px`),o});function l(e,o){a.update("header",e,o)}function d(e,o){e.value!==o&&(e.value=o)}function b({height:e}){d(h,e),l("size",e)}function g(e){s.value===!0&&d(n,!0),r("focusin",e)}v(()=>t.modelValue,e=>{l("space",e),d(n,!0),a.animate()}),v(i,e=>{l("offset",e)}),v(()=>t.reveal,e=>{e===!1&&d(n,t.modelValue)}),v(n,e=>{a.animate(),r("reveal",e)}),v(a.scroll,e=>{t.reveal===!0&&d(n,e.direction==="up"||e.position<=t.revealOffset||e.position-e.inflectionPoint<100)});const y={};return a.instances.header=y,t.modelValue===!0&&l("size",h.value),l("space",t.modelValue),l("offset",i.value),z(()=>{a.instances.header===y&&(a.instances.header=void 0,l("size",0),l("offset",0),l("space",!1))}),()=>{const e=R(f.default,[]);return t.elevated===!0&&e.push(w("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),e.push(w(B,{debounce:0,onResize:b})),w("header",{class:H.value,style:V.value,onFocusin:g},e)}}});const L={dark:{type:Boolean,default:null}};function j(t,f){return m(()=>t.dark===null?f.dark.isActive:t.dark)}const E={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},N=["beforeShow","show","beforeHide","hide"];function K({showing:t,canShow:f,hideOnRouteChange:r,handleShow:c,handleHide:a,processOnMount:h}){const n=x(),{props:u,emit:i,proxy:p}=n;let s;function H(e){t.value===!0?d(e):V(e)}function V(e){if(u.disable===!0||e!==void 0&&e.qAnchorHandled===!0||f!==void 0&&f(e)!==!0)return;const o=u["onUpdate:modelValue"]!==void 0;o===!0&&(i("update:modelValue",!0),s=e,k(()=>{s===e&&(s=void 0)})),(u.modelValue===null||o===!1)&&l(e)}function l(e){t.value!==!0&&(t.value=!0,i("beforeShow",e),c!==void 0?c(e):i("show",e))}function d(e){if(u.disable===!0)return;const o=u["onUpdate:modelValue"]!==void 0;o===!0&&(i("update:modelValue",!1),s=e,k(()=>{s===e&&(s=void 0)})),(u.modelValue===null||o===!1)&&b(e)}function b(e){t.value!==!1&&(t.value=!1,i("beforeHide",e),a!==void 0?a(e):i("hide",e))}function g(e){u.disable===!0&&e===!0?u["onUpdate:modelValue"]!==void 0&&i("update:modelValue",!1):e===!0!==t.value&&(e===!0?l:b)(s)}v(()=>u.modelValue,g),r!==void 0&&P(n)===!0&&v(()=>p.$route.fullPath,()=>{r.value===!0&&t.value===!0&&d()}),h===!0&&U(()=>{g(u.modelValue)});const y={show:V,hide:d,toggle:H};return Object.assign(p,y),y}function W(){let t=null;const f=x();function r(){t!==null&&(clearTimeout(t),t=null)}return A(r),z(r),{removeTimeout:r,registerTimeout(c,a){r(),$(f)===!1&&(t=setTimeout(c,a))}}}function G(){if(window.getSelection!==void 0){const t=window.getSelection();t.empty!==void 0?t.empty():t.removeAllRanges!==void 0&&(t.removeAllRanges(),O.is.mobile!==!0&&t.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}export{I as Q,j as a,E as b,G as c,N as d,W as e,K as f,L as u};
